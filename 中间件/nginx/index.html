
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../%E8%B5%84%E6%96%99/mysql8.0%20%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA/">
      
      
        <link rel="next" href="../../%E8%B5%84%E6%96%99/EFK%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Nginx学习 - 理想乡随手记</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nginx" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="理想乡随手记" class="md-header__button md-logo" aria-label="理想乡随手记" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            理想乡随手记
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Nginx学习
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/squidfunk/mkdocs-material" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    squidfunk/mkdocs-material
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
    
  
  首页

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E8%B5%84%E6%96%99/deespeek/deespeek%20api/deepseek%20api%20%E6%96%87%E6%A1%A3/DeepSeek%20API%20%E6%96%87%E6%A1%A3/" class="md-tabs__link">
          
  
  
    
  
  ai

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E8%B5%84%E6%96%99/openstack/" class="md-tabs__link">
          
  
  
    
  
  私有云

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E8%B5%84%E6%96%99/docker%20%E5%9F%BA%E7%A1%80/" class="md-tabs__link">
          
  
  
    
  
  容器云

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E8%B5%84%E6%96%99/rocky%20linux%20%E9%83%A8%E7%BD%B2zabbix/" class="md-tabs__link">
          
  
  
    
  
  监控

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../%E8%B5%84%E6%96%99/mysql8.0%20%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA/" class="md-tabs__link">
          
  
  
    
  
  中间件

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../%E8%B5%84%E6%96%99/shell%20%E5%AD%A6%E4%B9%A0/" class="md-tabs__link">
        
  
  
    
  
  shell

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../openstack%20api/create_image/" class="md-tabs__link">
          
  
  
    
  
  python

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E8%B5%84%E6%96%99/ansible/" class="md-tabs__link">
          
  
  
    
  
  ansible

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="理想乡随手记" class="md-nav__button md-logo" aria-label="理想乡随手记" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    理想乡随手记
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/squidfunk/mkdocs-material" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    squidfunk/mkdocs-material
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    首页
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            首页
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/%E9%98%BF%E9%87%8C%E4%BA%91yum%E6%BA%90/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    小资料
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/win%E7%B3%BB%E7%BB%9F%E5%BF%AB%E9%80%9F%E6%BF%80%E6%B4%BB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    win系统激活
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ai
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            ai
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/deespeek/deespeek%20api/deepseek%20api%20%E6%96%87%E6%A1%A3/DeepSeek%20API%20%E6%96%87%E6%A1%A3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    deespeek api
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/deespeek/deespeek%20%E8%81%8C%E5%9C%BA%E8%B5%8B%E8%83%BD/DeepSeek%E5%A6%82%E4%BD%95%E8%B5%8B%E8%83%BD%E8%81%8C%E5%9C%BA%E5%BA%94%E7%94%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    deespeek 职场赋能
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/linux%20ubuntu%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2ai%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ubuntu搭建ai模型
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    私有云
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            私有云
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/openstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenStack云计算实战-综合实训
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openstack/Openstack%E8%BF%90%E7%BB%B4.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    openstack基础命令
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openstack/heat%E6%A8%A1%E6%9D%BF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    openstack-heat
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    容器云
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            容器云
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    docker
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1_1" id="__nav_4_1_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    docker 项目
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_1">
            <span class="md-nav__icon md-icon"></span>
            docker 项目
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/docker%20%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    docker基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/docker%20project/%E8%8A%8B%E9%81%93%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    芋道后台系统部署
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/docker%20project/Docker%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8ENextcloud%E7%9A%84%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98%E7%A7%81%E6%9C%89%E4%BA%91%E7%9B%98%E4%B8%AA%E4%BA%BA%E7%9B%B8%E5%86%8C%E5%AE%B6%E5%BA%ADNAS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker搭建基于Nextcloud的个人云盘私有云盘个人相册家庭NAS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/docker%20project/%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2Ward%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用Docker部署Ward服务器监控工具
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.yuque.com/wukong-zorrm/xwas40/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    B站一小时精讲
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    k8s(前期自学)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            k8s(前期自学)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/ansible%E9%83%A8%E7%BD%B21.28.2%E9%9B%86%E7%BE%A4%28Containerd%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ansible搭建k8s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    kubeshere
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            kubeshere
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/kubesphere%E5%AE%89%E8%A3%85/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    kubeshere安装
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    老李k8s(系统学习)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            老李k8s(系统学习)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/01.%E5%BC%80%E7%AF%87/%E7%AC%94%E8%AE%B0/Kubernetes%20-%2001/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    01.开篇
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E6%90%AD%E5%BB%BA/02.K8s%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E7%AC%94%E8%AE%B0/Kubernetes%20-%2002/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    02.搭建
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/03.K8s%E7%AE%A1%E7%90%86%E5%88%A9%E5%99%A8/%E7%AC%94%E8%AE%B0/Kubernetes%20-%2003/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    03.k8s管理利器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/04.Kubesphere%E5%BA%94%E7%94%A8%E5%95%86%E5%BA%97/%E7%AC%94%E8%AE%B0/Kubernetes%20-%2004/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    04.Kubesphere应用商店
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/05.Kubectl%20%E5%91%BD%E4%BB%A4%E6%8C%87%E5%8D%97/%E7%AC%94%E8%AE%B0/Kubernetes%20-%2005/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    05.Kubectl 命令指南
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/06.K8s%E4%B8%AD%E7%9A%84Yaml%E6%96%87%E4%BB%B6/Kubernetes%20-%2006/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    06.K8s中的Yaml文件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/07.K8s%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/Kubernetes%20-%2007/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    07.K8s的命名空间
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../老李k8s笔记/k8s学习/08.K8s的资源配额与限制/笔记/Kubernetes - 08.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    08.K8s的资源配额与限制
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/09.K8s%E7%9A%84Pod/%E7%AC%94%E8%AE%B0/Kubernetes%20-%2009/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    09.K8s的Pod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/10.%E8%8A%82%E7%82%B9%E6%B1%A1%E7%82%B9%E5%92%8C%E5%AE%B9%E5%BF%8D/%E7%AC%94%E8%AE%B0/Kubernetes%20-%2010/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10.节点污点和容忍
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/11.K8s%E7%9A%84Label/%E7%AC%94%E8%AE%B0/Kubernetes%20-%2011/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11.K8s的Label
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/12.K8s%E6%8E%A7%E5%88%B6%E5%99%A8/%E7%AC%94%E8%AE%B0/Kubernetes%20-%2012/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12.K8s控制器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/13.K8s%E7%9A%84Service/%E7%AC%94%E8%AE%B0/Kubernetes%20-%2013/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13.K8s的Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/14.K8s%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96/%E7%AC%94%E8%AE%B0/Kubernetes%20-%2014/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    14.K8s数据持久化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/15.ConfigMap%E4%B8%8ESecret/Kubernetes%20-%2015/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    15.ConfigMap与Secret
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/16.Ingress/%E7%AC%94%E8%AE%B0/Kubernetes%20-%2016/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    16.Ingress
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    老李实战篇
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            老李实战篇
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/%E5%AE%9E%E6%88%98%E7%AF%87-Ingress%E5%AE%9E%E7%8E%B0%E9%87%91%E4%B8%9D%E9%9B%80%E5%8F%91%E5%B8%83/%E7%AC%94%E8%AE%B0/%E5%AE%9E%E6%88%98%E7%AF%87-Ingress%E5%AE%9E%E7%8E%B0%E9%87%91%E4%B8%9D%E9%9B%80%E5%8F%91%E5%B8%83/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    实战篇-Ingress实现金丝雀发布
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/%E5%AE%9E%E6%88%98%E7%AF%87-K8s%E9%83%A8%E7%BD%B2%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E7%9A%84%E9%A1%B9%E7%9B%AE/%E7%AC%94%E8%AE%B0/%E5%AE%9E%E6%88%98%E7%AF%87-K8s%E9%83%A8%E7%BD%B2%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E7%9A%84%E9%A1%B9%E7%9B%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    实战篇-K8s部署前后端分离的项目
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%80%81%E6%9D%8Ek8s%E7%AC%94%E8%AE%B0/k8s%E5%AD%A6%E4%B9%A0/%E5%AE%9E%E6%88%98%E7%AF%87-K8s%E4%B8%AD%E6%8B%89%E5%8F%96%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E7%9A%84%E9%95%9C%E5%83%8F/%E7%AC%94%E8%AE%B0/%E5%AE%9E%E6%88%98%E7%AF%87-K8s%E6%8B%89%E5%8F%96%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E7%9A%84%E9%95%9C%E5%83%8F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    实战篇-K8s中拉取私有仓库的镜像
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    监控
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            监控
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/rocky%20linux%20%E9%83%A8%E7%BD%B2zabbix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    zabbix
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/docker%20project/Prometheus%E7%9B%91%E6%8E%A7%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Promethus监控
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    中间件
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            中间件
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/mysql8.0%20%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mysql8.0
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Nginx学习
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Nginx学习
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx学习
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx学习">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginx_1" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      什么是代理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="什么是代理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      正向代理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      反向代理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_2" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx安装相关
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx安装相关">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      下载与安装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      注册为系统服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      新增系统服务配置文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_3" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx常用命令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_4" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx目录
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_5" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx进程模型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx进程模型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#worker" class="md-nav__link">
    <span class="md-ellipsis">
      worker的抢占机制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#worker_1" class="md-nav__link">
    <span class="md-ellipsis">
      Worker事件处理机制
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_6" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx配置文件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx配置文件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginxconf" class="md-nav__link">
    <span class="md-ellipsis">
      nginx.conf配置文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sendfile" class="md-nav__link">
    <span class="md-ellipsis">
      sendfile配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gzip" class="md-nav__link">
    <span class="md-ellipsis">
      gzip配置 #一般不用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server" class="md-nav__link">
    <span class="md-ellipsis">
      server配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      反向代理与负载均衡
    </span>
  </a>
  
    <nav class="md-nav" aria-label="反向代理与负载均衡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#l4l7" class="md-nav__link">
    <span class="md-ellipsis">
      L4、L7负载均衡
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_7" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx负载均衡
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx负载均衡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      负载均衡配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      动静分离配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/EFK%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EFK日志收集
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/shell%20%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    shell
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    python
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_1" >
        
          
          <label class="md-nav__link" for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    openstack api
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_1">
            <span class="md-nav__icon md-icon"></span>
            openstack api
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openstack%20api/create_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    image
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openstack%20api/create_user/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    user
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openstack%20api/create_flavor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    flavor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openstack%20api/create_network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    network
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2" >
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    selenium
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            selenium
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../selenium/selenium%E5%8E%86%E5%8F%B2%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    selenium历史学习记录
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../selenium/%E8%87%AA%E5%8A%A8%E5%8C%96.docx" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    自动化文档
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ansible
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            ansible
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%B5%84%E6%96%99/ansible/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ansible搭建
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx学习
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx学习">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginx_1" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      什么是代理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="什么是代理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      正向代理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      反向代理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_2" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx安装相关
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx安装相关">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      下载与安装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      注册为系统服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      新增系统服务配置文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_3" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx常用命令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_4" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx目录
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_5" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx进程模型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx进程模型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#worker" class="md-nav__link">
    <span class="md-ellipsis">
      worker的抢占机制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#worker_1" class="md-nav__link">
    <span class="md-ellipsis">
      Worker事件处理机制
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_6" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx配置文件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx配置文件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginxconf" class="md-nav__link">
    <span class="md-ellipsis">
      nginx.conf配置文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sendfile" class="md-nav__link">
    <span class="md-ellipsis">
      sendfile配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gzip" class="md-nav__link">
    <span class="md-ellipsis">
      gzip配置 #一般不用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server" class="md-nav__link">
    <span class="md-ellipsis">
      server配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      反向代理与负载均衡
    </span>
  </a>
  
    <nav class="md-nav" aria-label="反向代理与负载均衡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#l4l7" class="md-nav__link">
    <span class="md-ellipsis">
      L4、L7负载均衡
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_7" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx负载均衡
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx负载均衡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      负载均衡配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      动静分离配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Nginx学习</h1>

<h2 id="nginx">Nginx学习</h2>
<h3 id="nginx_1">Nginx介绍</h3>
<p>Nginx是一个高性能的HTTP、反向代理服务器</p>
<p>主要功能：</p>
<ul>
<li>反向代理</li>
<li>实现集群和负载均衡</li>
<li>静态资源虚拟化</li>
</ul>
<p>Nginx的版本：</p>
<ul>
<li>Nginx开源版 http://nginx.org/en/</li>
</ul>
<p>官方原始的Nginx版本</p>
<ul>
<li>Nginx plus商业版</li>
</ul>
<p>开箱即用，集成了大量功能</p>
<ul>
<li>Open Resty https://openresty.org/cn/</li>
</ul>
<p>OpenResty是一个基于Nginx与 Lua 的高性能 Web 平台，其内部集成了大量精良的 Lua 库、第三方模块以及大多数的依赖项。<strong>更适用于需要大量二次开发的场景，有极强的扩展性</strong></p>
<ul>
<li>Tengine https://tengine.taobao.org/</li>
</ul>
<p>由淘宝网发起的Web服务器项目。它在<a href="http://nginx.org/">Nginx</a>的基础上，针对大访问量网站的需求，添加了很多高级功能和特性。Tengine的性能和稳定性已经在大型的网站如<a href="http://www.taobao.com/">淘宝网</a>，<a href="http://www.tmall.com/">天猫商城</a>等得到了很好的检验。相比于Open Resty，扩展性不够强，但是能够满足绝多数使用场景</p>
<h3 id="_1">什么是代理</h3>
<h4 id="_2">正向代理</h4>
<p>正向代理可以理解为「客户端」的代理</p>
<p><img alt="image-20250402150619727" src="../image/image-20250402150619727.png" /></p>
<h4 id="_3">反向代理</h4>
<p>反向代理可以理解为「服务器」的代理</p>
<p><img alt="image-20250402150649066" src="../image/image-20250402150649066.png" /></p>
<h3 id="nginx_2">Nginx安装相关</h3>
<h4 id="_4">下载与安装</h4>
<p>下载源代码手动编译安装(推荐)，下载Nginx包：<a href="http://nginx.org/en/download.html">官网下载地址</a></p>
<p><img alt="image-20250402151035355" src="../image/image-20250402151035355.png" /></p>
<p>解压Nginx包，并安装</p>
<div class="codehilite"><pre><span></span><code><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">zxvf</span><span class="w"> </span><span class="n">nginx</span><span class="o">-</span><span class="mf">1.27.4</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span>
<span class="o">[</span><span class="n">root@nginx ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="n">nginx</span><span class="o">-</span><span class="mf">1.27.4</span>
<span class="o">[</span><span class="n">root@nginx nginx-1.27.4</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">ls</span>
</code></pre></div>

<p>安装依赖库</p>
<div class="codehilite"><pre><span></span><code>#安装各种依赖
yum install -y gcc gcc-c++ make pcre pcre-devel zlib zlib-devel
</code></pre></div>

<p>编译安装</p>
<div class="codehilite"><pre><span></span><code>./configure --prefix=/usr/local/nginx # 指定编译选项，--prefix选项指定安装的目录
make # 编译
make install # 安装编译结果
#执行make的结果，这个就是正确的
make[1]: Leaving directory &#39;/root/nginx-1.27.4&#39;
</code></pre></div>

<p>启动</p>
<div class="codehilite"><pre><span></span><code><span class="n">cd</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">sbin</span>

<span class="n">ls</span><span class="w"> </span><span class="c1"># 里面是一个nginx的可执行文件</span>

<span class="o">./</span><span class="n">nginx</span><span class="w"> </span><span class="c1"># 这个就是nginx的可执行文件</span>

<span class="n">systemctl</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">firewalld</span><span class="w"> </span><span class="c1">#关闭防火墙才可以访问，内网我就直接关闭了</span>
<span class="c1"># 开放端口，例子：firewall-cmd --zone=public --add-port=80/tcp --permanent</span>
<span class="n">firewall</span><span class="o">-</span><span class="n">cmd</span><span class="w"> </span><span class="o">--</span><span class="n">zone</span><span class="o">=</span><span class="n">public</span><span class="w"> </span><span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">port</span><span class="o">=</span><span class="err">端口号</span><span class="o">/</span><span class="err">协议</span><span class="w"> </span><span class="o">--</span><span class="n">permanent</span>

<span class="c1"># 修改后，重启防火墙才会生效</span>
<span class="n">firewall</span><span class="o">-</span><span class="n">cmd</span><span class="w"> </span><span class="o">--</span><span class="n">reload</span>
</code></pre></div>

<p>补充：--zone参数为防火墙规则应用的区域</p>
<div class="codehilite"><pre><span></span><code>区域包括：
    public：用于公共网络，例如 Internet。
    internal：用于内部网络，例如公司内部网络。
    external：用于外部网络，例如连接到互联网的网络。
    work：用于工作场所网络。
    home：用于家庭网络。
</code></pre></div>

<h4 id="_5">注册为系统服务</h4>
<p>注册为系统服务后，可以以系统服务的方式启动nginx</p>
<h4 id="_6">新增系统服务配置文件</h4>
<div class="codehilite"><pre><span></span><code>vim usr/lib/systemd/system/nginx.service
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="na">[Unit] </span>
<span class="na">Description</span><span class="o">=</span><span class="s">nginx </span>
<span class="na">After</span><span class="o">=</span><span class="s">network.target remote-fs.target nss-lookup.target </span>

<span class="k">[Service]</span>
<span class="na">Type</span><span class="o">=</span><span class="s">forking </span>

<span class="na">PIDFile</span><span class="o">=</span><span class="s">/usr/local/nginx/logs/nginx.pid</span>
<span class="na">ExecStartPre</span><span class="o">=</span><span class="s">/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf</span>
<span class="na">ExecStart</span><span class="o">=</span><span class="s">/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf </span>
<span class="na">ExecReload</span><span class="o">=</span><span class="s">/usr/local/nginx/sbin/nginx -s reload </span>
<span class="na">ExecStop</span><span class="o">=</span><span class="s">/usr/local/nginx/sbin/nginx -s stop # 停止</span>
<span class="na">ExecQuit</span><span class="o">=</span><span class="s">/usr/local/nginx/sbin/nginx -s quit  </span>
<span class="na">PrivateTmp</span><span class="o">=</span><span class="s">true </span>

<span class="na">[Install]   </span>
<span class="na">WantedBy</span><span class="o">=</span><span class="s">multi-user.target  </span>
</code></pre></div>

<p>文件注释</p>
<div class="codehilite"><pre><span></span><code><span class="k">[Unit]</span>
<span class="na">Description</span><span class="o">=</span><span class="s">nginx </span>
<span class="na">After</span><span class="o">=</span><span class="s">network.target remote-fs.target nss-lookup.target </span>

<span class="k">[Service]</span>
<span class="na">Type</span><span class="o">=</span><span class="s">forking </span>

<span class="na">PIDFile</span><span class="o">=</span><span class="s">/usr/local/nginx/logs/nginx.pid</span>
<span class="na">ExecStartPre</span><span class="o">=</span><span class="s">/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf</span>
<span class="na">ExecStart</span><span class="o">=</span><span class="s">/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf </span>
<span class="na">ExecReload</span><span class="o">=</span><span class="s">/usr/local/nginx/sbin/nginx -s reload </span>
<span class="na">ExecStop</span><span class="o">=</span><span class="s">/usr/local/nginx/sbin/nginx -s stop </span>
<span class="na">ExecQuit</span><span class="o">=</span><span class="s">/usr/local/nginx/sbin/nginx -s quit  </span>
<span class="na">PrivateTmp</span><span class="o">=</span><span class="s">true </span>

<span class="k">[Install]</span>
<span class="na">WantedBy</span><span class="o">=</span><span class="s">multi-user.target  </span>
</code></pre></div>

<p>重新加载系统文件</p>
<div class="codehilite"><pre><span></span><code><span class="n">systemctl</span><span class="w"> </span><span class="n">daemon</span><span class="o">-</span><span class="n">reload</span>
</code></pre></div>

<p>系统服务如何使用？</p>
<div class="codehilite"><pre><span></span><code><span class="n">systemctl</span><span class="w"> </span><span class="n">enable</span><span class="w"> </span><span class="n">xxx服务名</span><span class="w"> </span><span class="c1"># 自启动服务</span>
<span class="n">systemctl</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">xxx服务名</span><span class="w"> </span><span class="c1"># 服务运行状态</span>

<span class="n">systemctl</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">xxx服务名</span>
<span class="n">systemctl</span><span class="w"> </span><span class="n">reload</span><span class="w"> </span><span class="n">xxx服务名</span>
</code></pre></div>

<h4 id="nginx_3">Nginx常用命令</h4>
<div class="codehilite"><pre><span></span><code><span class="o">./</span><span class="n">nginx</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="c1"># 快速停止（正在进行的请求会直接被中断，很少使用）</span>
<span class="o">./</span><span class="n">nginx</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="n">quit</span><span class="w"> </span><span class="c1"># 处理完已接受的请求后，才会停止（优雅关机）</span>
<span class="o">./</span><span class="n">nginx</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="n">reload</span><span class="w"> </span><span class="c1"># 重新加载配置</span>

<span class="o">./</span><span class="n">nginx</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">xxx</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="c1"># 配置nginx使用的配置文件地址（默认为conf/nginx.conf ）</span>

<span class="o">./</span><span class="n">nginx</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="c1"># 检查nginx配置是否正确</span>
<span class="o">./</span><span class="n">nginx</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="c1"># nginx版本号</span>
</code></pre></div>

<p>给nginx配置好系统服务之后可以用systemctl 来使用nginx命令</p>
<div class="codehilite"><pre><span></span><code><span class="n">systemctl</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">nginx</span><span class="w">  </span>
<span class="n">systemctl</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">nginx</span>
<span class="n">systemctl</span><span class="w"> </span><span class="n">restart</span><span class="w"> </span><span class="n">nginx</span>
<span class="n">systemctl</span><span class="w"> </span><span class="n">reload</span><span class="w"> </span><span class="n">nginx</span>
</code></pre></div>

<p>查看nginx状态</p>
<div class="codehilite"><pre><span></span><code>ps -ef|grep nginx

pgrep -f nginx
</code></pre></div>

<p><img alt="image-20250402161156953" src="../image/image-20250402161156953.png" /></p>
<h4 id="nginx_4">Nginx目录</h4>
<p>Nginx一般安装在<code>/usr/local/nginx</code>目录下（安装时--prefix可指定安装目录）</p>
<p><img alt="image-20250402160814283" src="../image/image-20250402160814283.png" /></p>
<div class="codehilite"><pre><span></span><code>conf #配置文件
    ｜-nginx.conf # 主配置文件
    ｜-其他配置文件 # 可通过那个include关键字，引入到了nginx.conf生效

html #静态页面

logs（默认不是放在这里，可以在配置文件中修改为这里）
    ｜-access.log #访问日志(每次访问都会记录)
    ｜-error.log #错误日志
    ｜-nginx.pid #进程号

sbin
    ｜-nginx #主进程文件

*_temp #运行时，生成临时文件
</code></pre></div>

<h3 id="nginx_5">Nginx进程模型</h3>
<p>一个Master：监听请求，并分配worker进程处理</p>
<p>默认一个worker进程（可以在配置文件中修改worker数量）：处理客户端请求</p>
<p><img src="image/image-20250402160859727.png" alt="image-20250402160859727" style="zoom:33%;" /></p>
<p>每个worker之间彼此独立，每一个worker处理多个请求</p>
<p><img alt="image-20250402160923114" src="../image/image-20250402160923114.png" /></p>
<h4 id="worker">worker的抢占机制</h4>
<p>多个worker进程争抢一个锁，获取锁的进程进行响应</p>
<p><img alt="image-20250402161019039" src="../image/image-20250402161019039.png" /></p>
<h4 id="worker_1">Worker事件处理机制</h4>
<p>传统HTTP服务器是同步处理，当多个客户端请求时，如果Client1的请求被阻塞，Master会fork新的worker进程处理</p>
<p>但是Nginx采用的是异步非阻塞方式，如果Client1的请求被阻塞，worker会取处理下一个请求，不会阻塞当前worker进程。所以Nginx的一个worker进程可以并发处理大量请求</p>
<p><img alt="image-20250402161045404" src="../image/image-20250402161045404.png" /></p>
<h3 id="nginx_6">Nginx配置文件</h3>
<p>后面学习Nginx配置，每次修改配置文件，一定要重载才能生效</p>
<div class="codehilite"><pre><span></span><code><span class="n">systemctl</span><span class="w"> </span><span class="n">reload</span><span class="w"> </span><span class="n">nginx</span><span class="w"> </span><span class="c1"># 以系统服务的方式启动nginx</span>
</code></pre></div>

<h4 id="nginxconf">nginx.conf配置文件</h4>
<div class="codehilite"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">master进程会启动worker进程</span><span class="err">，</span><span class="nx">该选项设置在系统中显示启动该进程的用户名</span><span class="err">（</span><span class="nx">一般不改动</span><span class="err">，</span><span class="nx">默认nobody</span><span class="err">）</span>
<span class="err">#</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="nx">nobody</span>

<span class="err">#</span><span class="w"> </span><span class="nx">启动的worker进程数</span>
<span class="nx">worker_processes</span><span class="w">  </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span>

<span class="err">#</span><span class="w"> </span><span class="nx">错误日志放置的路径</span><span class="w"> </span><span class="nx">notice</span><span class="err">、</span><span class="nx">info是错误日志的级别</span><span class="err">，</span><span class="nx">比如</span><span class="err">：</span><span class="nx">info就是日志级别大于info才生成日志</span>
<span class="err">#</span><span class="w"> </span><span class="nx">默认地址为</span><span class="o">/</span><span class="kd">var</span><span class="o">/</span><span class="nx">log</span><span class="o">/</span><span class="nx">nginx</span><span class="o">/</span><span class="nx">error</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="err">，</span><span class="nx">可通过nginx</span><span class="w"> </span><span class="o">-</span><span class="nx">V返回的</span><span class="o">--</span><span class="nx">eror</span><span class="o">-</span><span class="nx">log</span><span class="o">-</span><span class="nx">path字段获取实际值</span>
<span class="err">#</span><span class="nx">error_log</span><span class="w">  </span><span class="nx">logs</span><span class="o">/</span><span class="nx">error</span><span class="p">.</span><span class="nx">log</span><span class="p">;</span>
<span class="err">#</span><span class="nx">error_log</span><span class="w">  </span><span class="nx">logs</span><span class="o">/</span><span class="nx">error</span><span class="p">.</span><span class="nx">log</span><span class="w">  </span><span class="nx">notice</span><span class="p">;</span>
<span class="err">#</span><span class="nx">error_log</span><span class="w">  </span><span class="nx">logs</span><span class="o">/</span><span class="nx">error</span><span class="p">.</span><span class="nx">log</span><span class="w">  </span><span class="nx">info</span><span class="p">;</span>

<span class="err">#</span><span class="w"> </span><span class="nx">pid文件存放路径</span><span class="p">,</span><span class="nx">默认</span><span class="err">：</span><span class="o">/</span><span class="kd">var</span><span class="o">/</span><span class="nx">run</span><span class="o">/</span><span class="nx">nginx</span><span class="o">/</span><span class="nx">nginx</span><span class="p">.</span><span class="nx">pid</span><span class="err">，</span><span class="nx">可通过nginx</span><span class="w"> </span><span class="o">-</span><span class="nx">V返回的</span><span class="o">--</span><span class="nx">pid</span><span class="o">-</span><span class="nx">path字段获取实际值</span>
<span class="err">#</span><span class="nx">pid</span><span class="w">        </span><span class="nx">logs</span><span class="o">/</span><span class="nx">nginx</span><span class="p">.</span><span class="nx">pid</span><span class="p">;</span>

<span class="err">#</span><span class="w"> </span><span class="nx">配置事件处理方式</span><span class="err">、</span><span class="nx">worker最大连接数</span>
<span class="nx">events</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">use</span><span class="w"> </span><span class="nx">epoll</span><span class="p">;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nx">使用epoll事件处理机制</span><span class="err">（</span><span class="nx">默认值</span><span class="err">）</span>
<span class="w">    </span><span class="nx">worker_connections</span><span class="w">  </span><span class="mi">1024</span><span class="p">;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nx">每个worker进程处理的最大连接数</span>
<span class="p">}</span>


<span class="err">#</span><span class="w"> </span><span class="nx">http模块配置</span>
<span class="nx">http</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">include</span><span class="w">       </span><span class="nx">mime</span><span class="p">.</span><span class="nx">types</span><span class="p">;</span><span class="w"> </span><span class="err">#</span><span class="nx">include是引入关键字</span><span class="err">，</span><span class="nx">这里引入了mime</span><span class="p">.</span><span class="nx">types这个配置文件的内容</span><span class="err">（</span><span class="nx">同在conf目录下</span><span class="err">，</span><span class="nx">mime</span><span class="p">.</span><span class="nx">types是用来定义</span><span class="err">，</span><span class="nx">请求返回的content</span><span class="o">-</span><span class="k">type</span><span class="err">）</span>
<span class="w">    </span><span class="nx">default_type</span><span class="w">  </span><span class="nx">application</span><span class="o">/</span><span class="nx">octet</span><span class="o">-</span><span class="nx">stream</span><span class="p">;</span><span class="w"> </span><span class="err">#</span><span class="nx">mime</span><span class="p">.</span><span class="nx">types未定义的</span><span class="err">，</span><span class="nx">使用默认格式application</span><span class="o">/</span><span class="nx">octet</span><span class="o">-</span><span class="nx">stream</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="nx">访问日志格式</span>
<span class="w">    </span><span class="err">#</span><span class="nx">log_format</span><span class="w">  </span><span class="nx">main</span><span class="w">  </span><span class="err">&#39;$</span><span class="nx">remote_addr</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="err">$</span><span class="nx">remote_user</span><span class="w"> </span><span class="p">[</span><span class="err">$</span><span class="nx">time_local</span><span class="p">]</span><span class="w"> </span><span class="s">&quot;$request&quot;</span><span class="w"> </span><span class="err">&#39;</span>
<span class="w">    </span><span class="err">#</span><span class="w">                  </span><span class="err">&#39;$</span><span class="nx">status</span><span class="w"> </span><span class="err">$</span><span class="nx">body_bytes_sent</span><span class="w"> </span><span class="s">&quot;$http_referer&quot;</span><span class="w"> </span><span class="err">&#39;</span>
<span class="w">    </span><span class="err">#</span><span class="w">                  </span><span class="err">&#39;</span><span class="s">&quot;$http_user_agent&quot;</span><span class="w"> </span><span class="s">&quot;$http_x_forwarded_for&quot;</span><span class="err">&#39;</span><span class="p">;</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="nx">访问日志地址</span><span class="err">，</span><span class="nx">默认</span><span class="err">：</span><span class="o">/</span><span class="kd">var</span><span class="o">/</span><span class="nx">log</span><span class="o">/</span><span class="nx">nginx</span><span class="o">/</span><span class="nx">access</span><span class="p">.</span><span class="nx">log</span><span class="err">，</span><span class="nx">可通过nginx</span><span class="w"> </span><span class="o">-</span><span class="nx">V返回的</span><span class="o">--</span><span class="nx">http</span><span class="o">-</span><span class="nx">log</span><span class="o">-</span><span class="nx">path字段获取实际值</span>
<span class="w">    </span><span class="err">#</span><span class="nx">access_log</span><span class="w">  </span><span class="nx">logs</span><span class="o">/</span><span class="nx">access</span><span class="p">.</span><span class="nx">log</span><span class="w">  </span><span class="nx">main</span><span class="p">;</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="nx">详见下文</span>
<span class="w">    </span><span class="nx">sendfile</span><span class="w">        </span><span class="nx">on</span><span class="p">;</span><span class="w"> </span>
<span class="w">    </span><span class="err">#</span><span class="nx">tcp_nopush</span><span class="w">     </span><span class="nx">on</span><span class="p">;</span>

<span class="w">    </span><span class="nx">keepalive_timeout</span><span class="w">  </span><span class="mi">65</span><span class="p">;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nx">TCP链接超时时间</span><span class="p">,</span><span class="nx">单位秒</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="nx">压缩相关</span><span class="err">，</span><span class="nx">详见下文</span>
<span class="w">        </span><span class="nx">gzip</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nx">开启压缩</span><span class="err">，</span><span class="nx">压缩后发送给客户端</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="nx">详见下文</span><span class="w"> </span>
<span class="w">    </span><span class="nx">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">//xxx</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="sendfile">sendfile配置</h4>
<p>打开sendfile，用户请求的数据不用再加载到nginx的内存中，而是直接发送</p>
<p>高负载的场景下，使用 sendfile 功能可以降低 CPU 和内存的占用，提升服务器性能</p>
<div class="codehilite"><pre><span></span><code><span class="nt">http</span><span class="p">{</span>
<span class="w">    </span><span class="n">sendfile</span><span class="p">:</span><span class="kc">on</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="kc">off</span>
<span class="p">}</span>

<span class="err">#</span><span class="w"> </span><span class="nt">或者指定某个server开启</span>
<span class="nt">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">location</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="err">sendfile</span><span class="w"> </span><span class="err">off</span><span class="p">;</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">    </span><span class="p">}</span>
<span class="err">}</span>
</code></pre></div>

<p><img alt="image-20250402164717296" src="../image/image-20250402164717296.png" /></p>
<h4 id="gzip">gzip配置 #一般不用</h4>
<div class="codehilite"><pre><span></span><code><span class="nx">http</span><span class="p">{</span>
<span class="w">      </span><span class="nx">gzip</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nx">开启压缩</span><span class="err">，</span><span class="nx">压缩后发送给客户端</span>
<span class="w">        </span><span class="nx">gzip_min_length</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="err">#</span><span class="w"> </span><span class="nx">设置最小压缩下限</span><span class="err">。</span><span class="mi">1</span><span class="nx">就是小于1字节的文件不压缩</span>
<span class="w">        </span><span class="nx">gzip_comp_level</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nx">压缩级别0</span><span class="o">-</span><span class="mi">9</span><span class="err">，</span><span class="nx">值越大文件就压缩的越小</span><span class="err">，</span><span class="nx">相应的会损耗更多性能</span>
<span class="w">        </span><span class="nx">gzip_type</span><span class="w"> </span><span class="nx">text</span><span class="o">/</span><span class="nx">plain</span><span class="w"> </span><span class="nx">application</span><span class="o">/</span><span class="nx">javascript</span><span class="w"> </span><span class="nx">image</span><span class="o">/*</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nx">指定哪些</span><span class="w"> </span><span class="nx">MIME</span><span class="w"> </span><span class="nx">类型</span><span class="err">，</span><span class="nx">开启压缩</span><span class="err">（</span><span class="nx">不写默认全部</span><span class="err">），</span><span class="nx">可以使用通配符</span><span class="w"> </span><span class="nx">image</span><span class="o">/*</span><span class="w"> </span><span class="nx">就是所有图片</span><span class="err">。</span><span class="nx">具体哪些类型可以看conf</span><span class="o">/</span><span class="nx">mime</span><span class="p">.</span><span class="nx">types文件</span>
<span class="p">}</span>
</code></pre></div>

<p>nginx 中的 gzip 压缩分为动态压缩、静态压缩</p>
<ul>
<li>动态压缩：服务器给客户端返回响应时，消耗自身的资源进行实时压缩，保证客户端拿到 gzip 格式的文件</li>
</ul>
<p>gzip on开启的就是动态压缩，gzip_comp_level设置的级别高，可能会造成CPU占用过高（文章：<a href="https://www.toutiao.com/article/7329343713828897280/?app=news_article&amp;timestamp=1707783801&amp;use_new_style=1&amp;req_id=202402130823202F9A6100389685E57A11&amp;group_id=7329343713828897280&amp;share_token=F2E89DA7-CC1F-4AAC-9BCC-A82B8020A9D6&amp;tt_from=weixin&amp;utm_source=weixin&amp;utm_medium=toutiao_ios&amp;utm_campaign=client_share&amp;wxshare_count=1&amp;source=m_redirect">简单一招竟把nginx服务器性能提升50倍</a>）</p>
<ul>
<li>静态压缩：直接将预先压缩过的 .gz 文件返回给客户端，不再实时压缩文件，如果找不到 .gz 文件，会使用对应的原始文件</li>
</ul>
<p>该功能需要模块： <code>ngx_http_gzip_static_module</code>（默认不会被构建）</p>
<p>我们可以通过下面命令查看，当前安装的是否包含该模块</p>
<div class="codehilite"><pre><span></span><code>./nginx -V #注意大写
</code></pre></div>

<p><img alt="image-20250402164842944" src="../image/image-20250402164842944.png" /></p>
<p>如果不包含，需要重新编译Nginx</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="o">/</span><span class="n">configure</span><span class="w"> </span><span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">http_gzip_static_module</span><span class="w"> </span><span class="c1"># 指定编译配置，这个参数安装模块`ngx_http_gzip_static_module`</span>
<span class="n">make</span><span class="w"> </span><span class="c1"># 编译</span>
<span class="n">make</span><span class="w"> </span><span class="k">install</span><span class="w"> </span><span class="c1"># 安装</span>
</code></pre></div>

<p>包含该模块，则可以启用下面配置</p>
<div class="codehilite"><pre><span></span><code>http{
    gzip_static  on;
    gzip_proxied expired no-cache no-store private auth;
}
</code></pre></div>

<h4 id="server">server配置</h4>
<p>虚拟主机配置（可以启用多个），多个server字段，会根据请求的域名+端口从前向后匹配</p>
<p>用户访问<code>www.lxxhaven.top</code>（注意：需要解析到当前Nginx的这台机器），请求会匹配到下面的配置中</p>
<p>（我们本地测试时可以直接修改win系统的hosts，建立域名与Nginx所在机器IP的映射）</p>
<p>（server_name设置为localhost，即表示匹配任何打到这台机器的请求）</p>
<p>需要有域名，在哪个服务商进行解析都可以</p>
<p><img alt="image-20250404153053100" src="../image/image-20250404153053100.png" /></p>
<p>在虚拟机创建目录</p>
<div class="codehilite"><pre><span></span><code>cd /
mkdir -p www/www
mkdir -p www/vod
</code></pre></div>

<p>nginx.conf配置文件内容</p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">nginx</span><span class="w"> </span><span class="nx">conf</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">cat</span><span class="w"> </span><span class="nx">nginx</span><span class="p">.</span><span class="nx">conf</span>
<span class="nx">worker_processes</span><span class="w">  </span><span class="mi">1</span><span class="p">;</span>
<span class="nx">events</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">worker_connections</span><span class="w">  </span><span class="mi">1024</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">http</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">include</span><span class="w">       </span><span class="nx">mime</span><span class="p">.</span><span class="nx">types</span><span class="p">;</span>
<span class="w">    </span><span class="nx">default_type</span><span class="w">  </span><span class="nx">application</span><span class="o">/</span><span class="nx">octet</span><span class="o">-</span><span class="nx">stream</span><span class="p">;</span>
<span class="w">    </span><span class="nx">sendfile</span><span class="w">        </span><span class="nx">on</span><span class="p">;</span>

<span class="w">    </span><span class="nx">keepalive_timeout</span><span class="w">  </span><span class="mi">65</span><span class="p">;</span>
<span class="err">#</span><span class="nx">虚拟主机</span>
<span class="w">    </span><span class="nx">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">listen</span><span class="w">       </span><span class="mi">80</span><span class="p">;</span>
<span class="err">#</span><span class="nx">域名或者主机名</span><span class="p">,</span><span class="nx">还可以配置多个域名为同一个网页解析</span><span class="err">，</span><span class="nx">直接在server_name添加即可</span>
<span class="w">        </span><span class="nx">server_name</span><span class="w">  </span><span class="nx">www</span><span class="p">.</span><span class="nx">lxxhaven</span><span class="p">.</span><span class="nx">top</span><span class="p">;</span><span class="w"> </span>

<span class="w">        </span><span class="nx">location</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">root</span><span class="w">   </span><span class="o">/</span><span class="nx">www</span><span class="o">/</span><span class="nx">www</span><span class="p">;</span>
<span class="w">            </span><span class="nx">index</span><span class="w">  </span><span class="nx">index</span><span class="p">.</span><span class="nx">html</span><span class="w"> </span><span class="nx">index</span><span class="p">.</span><span class="nx">htm</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nx">error_page</span><span class="w">   </span><span class="mi">500</span><span class="w"> </span><span class="mi">502</span><span class="w"> </span><span class="mi">503</span><span class="w"> </span><span class="mi">504</span><span class="w">  </span><span class="o">/</span><span class="mi">50</span><span class="nx">x</span><span class="p">.</span><span class="nx">html</span><span class="p">;</span>
<span class="w">        </span><span class="nx">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">/</span><span class="mi">50</span><span class="nx">x</span><span class="p">.</span><span class="nx">html</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">root</span><span class="w">   </span><span class="nx">html</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">    </span><span class="p">}</span>

<span class="err">#</span><span class="nx">虚拟主机2</span>
<span class="w">    </span><span class="nx">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">listen</span><span class="w">       </span><span class="mi">80</span><span class="p">;</span>
<span class="w">        </span><span class="nx">server_name</span><span class="w">  </span><span class="nx">vod</span><span class="p">.</span><span class="nx">lxxhaven</span><span class="p">.</span><span class="nx">top</span><span class="p">;</span>

<span class="w">        </span><span class="nx">location</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">root</span><span class="w">   </span><span class="o">/</span><span class="nx">www</span><span class="o">/</span><span class="nx">vod</span><span class="p">;</span>
<span class="w">            </span><span class="nx">index</span><span class="w">  </span><span class="nx">index</span><span class="p">.</span><span class="nx">html</span><span class="w"> </span><span class="nx">index</span><span class="p">.</span><span class="nx">htm</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nx">error_page</span><span class="w">   </span><span class="mi">500</span><span class="w"> </span><span class="mi">502</span><span class="w"> </span><span class="mi">503</span><span class="w"> </span><span class="mi">504</span><span class="w">  </span><span class="o">/</span><span class="mi">50</span><span class="nx">x</span><span class="p">.</span><span class="nx">html</span><span class="p">;</span>
<span class="w">        </span><span class="nx">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">/</span><span class="mi">50</span><span class="nx">x</span><span class="p">.</span><span class="nx">html</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">root</span><span class="w">   </span><span class="nx">html</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">    </span><span class="p">}</span>



<span class="p">}</span>
</code></pre></div>

<p>不同域名进行访问</p>
<p><img alt="image-20250404153512415" src="../image/image-20250404153512415.png" /></p>
<h3 id="_7">反向代理与负载均衡</h3>
<p><strong>反向代理</strong>：这种代理方式叫做，隧道代理。有性能瓶颈，因为所有的数据都经过Nginx，所以Nginx服务器的性能至关重要</p>
<p><img alt="image-20250404170512332" src="../image/image-20250404170512332.png" /></p>
<p><strong>负载均衡</strong>：把请求，按照一定算法规则，分配给多台业务服务器（即使其中一个坏了/维护升级，还有其他服务器可以继续提供服务）</p>
<p><img alt="image-20250404170533651" src="../image/image-20250404170533651.png" /></p>
<h4 id="l4l7">L4、L7负载均衡</h4>
<p><strong>L4负载均衡</strong></p>
<p>在传输层（第四层）上工作的。它基于 IP 地址和端口号来进行负载均衡，不考虑传输的具体内容，仅通过查看传入数据包的目标 IP 地址和端口号，并根据预定义的规则将其转发到后端服务器上。</p>
<p>四层负载均衡器的主要优点是性能高，因为它只关注传输层的信息，不需要解析应用层协议的数据。常见的四层负载均衡器：</p>
<ul>
<li>F5硬负载均衡（硬件，价格昂贵）</li>
<li>LVS四层负载均衡</li>
<li>Haproxy四层负载均衡</li>
<li>Nginx四层负载均衡（Nginx 1.9版本后才支持，用得少Nginx一般用做七层负载均衡）</li>
</ul>
<p><strong>L7负载均衡</strong></p>
<p>在应用层（第七层）上工作的。它不仅考虑了传输层的信息（如 IP 地址和端口号），还分析了传输的应用层数据，例如 HTTP 请求的 URL、Cookie、报头等信息。基于这些信息，七层负载均衡器可以做出更精细的决策，并根据具体的应用需求将流量分发到不同的后端服务器上。</p>
<p>七层负载均衡器在传输层和应用层之间工作，因此它比四层负载均衡器更智能，可以实现更复杂的负载均衡策略。常见的七层负载均衡器：</p>
<ul>
<li>Nginx七层负载均衡</li>
<li>Haproxy七层负载均衡</li>
<li>apache七层负载均衡（并发到达百万级别，性能会大幅下降）</li>
</ul>
<h4 id="nginx_7">Nginx负载均衡</h4>
<h5 id="_8">负载均衡配置</h5>
<p><strong>反向代理单个服务器</strong></p>
<p>启用proxy_pass，root和index字段就会失效</p>
<p>proxy_pass后的地址必须写完整 <code>http://xxx</code>、<code>https://xxx</code></p>
<p><strong>注意：目标服务器如果是https的，需要特殊配置</strong></p>
<p>当请求命中了这条规则，会被转发到目标服务器地址</p>
<div class="codehilite"><pre><span></span><code><span class="nt">http</span><span class="p">{</span><span class="w">       </span>
<span class="w">        </span><span class="err">server</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="err">listen</span><span class="w">       </span><span class="err">80</span><span class="p">;</span>
<span class="w">        </span><span class="err">server_name</span><span class="w">  </span><span class="err">localhost</span><span class="p">;</span>

<span class="w">        </span><span class="err">location</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">{</span><span class="w"> </span>
<span class="w">                </span><span class="err">proxy_pass</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">xxx</span><span class="p">;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">参数是</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">server_name</span><span class="p">;</span>
<span class="w">                </span><span class="err">proxy_pass</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">qq</span><span class="o">.</span><span class="n">com</span><span class="p">;</span><span class="w">  </span><span class="err">#例子</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="err">}</span>
<span class="err">}</span>
</code></pre></div>

<p><img alt="image-20250404165606907" src="../image/image-20250404165606907.png" /></p>
<p>路径 + 参数会被一起转发</p>
<div class="codehilite"><pre><span></span><code>假设Nginx机器的地址为：http://www.xxx.com


请求 http://www.xxx.com/test?a=1
会被 proxy_pass地址/test?a=1
</code></pre></div>

<p>重写需求： 例如只有api前缀的才转发到后台服务器，但是接口并不包含api路径</p>
<div class="codehilite"><pre><span></span><code><span class="nt">location</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">     </span><span class="err">rewrite</span><span class="w"> </span><span class="err">^/api/(.*)</span><span class="w">  </span><span class="err">$1</span><span class="w"> </span>
<span class="w">   </span><span class="err">proxy_pass</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">xxx</span><span class="p">;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">参数是</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">server_name</span>
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code>请求 http://www.xxx.com/api/test?a=1
会被 proxy_pass地址/test?a=1
</code></pre></div>

<p><strong>反向代理集群</strong></p>
<p>上面Nginx接到请求后，会转发到一个目标地址。可以设置多个，实现负载集群</p>
<p>请求会代理到<code>192.168.3.210:80</code>和<code>192.168.3.211:80</code>这两个服务</p>
<p>每次访问随机分配到两个地址</p>
<div class="codehilite"><pre><span></span><code><span class="nt">http</span><span class="p">{</span>
<span class="w">    </span><span class="err">upstream</span><span class="w"> </span><span class="err">test_server{</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">参数是server_name</span>
<span class="w">        </span><span class="err">server</span><span class="w"> </span><span class="err">192.168.3.210:80</span><span class="p">;</span><span class="w"> </span><span class="err">#如果是80端口，可以省略不写</span>
<span class="w">        </span><span class="err">server</span><span class="w"> </span><span class="err">192.168.3.211:80</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nt">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="err">listen</span><span class="w">       </span><span class="err">80</span><span class="p">;</span>
<span class="w">        </span><span class="err">server_name</span><span class="w">  </span><span class="err">localhost</span><span class="p">;</span>

<span class="w">        </span><span class="err">location</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">{</span><span class="w"> </span>
<span class="w">                </span><span class="err">proxy_pass</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">test_server</span><span class="p">;</span><span class="w"> </span><span class="err">#与上面的upstream一致</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="err">}</span>
<span class="err">}</span>
</code></pre></div>

<p><strong>设置权重</strong></p>
<p>多个请求，Nginx会根据权重分配</p>
<div class="codehilite"><pre><span></span><code><span class="nt">upstream</span><span class="w"> </span><span class="nt">test_server</span><span class="p">{</span>
<span class="w">        </span><span class="err">server</span><span class="w"> </span><span class="err">192.168.3.210:80</span><span class="w"> </span><span class="err">weight=10</span><span class="p">;</span>
<span class="w">        </span><span class="err">server</span><span class="w"> </span><span class="err">192.168.3.211:80</span><span class="w"> </span><span class="err">weight=80</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>关闭</strong></p>
<p>为什么使用down关闭，而不是直接删除？请看ip_hash部分</p>
<div class="codehilite"><pre><span></span><code><span class="nt">upstream</span><span class="w"> </span><span class="nt">test_server</span><span class="p">{</span>
<span class="w">        </span><span class="err">server</span><span class="w"> </span><span class="err">192.168.3.210:80</span><span class="w"> </span><span class="err">down</span><span class="p">;</span><span class="w"> </span><span class="err">#表示某个机器不参与负载均衡,让机器休息</span>
<span class="w">        </span><span class="err">server</span><span class="w"> </span><span class="err">192.168.3.211:80</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>备用机</strong></p>
<p>backup的这个机器正常是不会被访问到，如果<code>192.168.3.211:80</code>出现故障，无法提供服务，才会自动启用</p>
<div class="codehilite"><pre><span></span><code><span class="nt">upstream</span><span class="w"> </span><span class="nt">test_server</span><span class="p">{</span>
<span class="w">        </span><span class="err">server</span><span class="w"> </span><span class="err">192.168.3.210:80</span><span class="w"> </span><span class="p">;</span>
<span class="w">        </span><span class="err">server</span><span class="w"> </span><span class="err">192.168.3.211:80</span><span class="w"> </span><span class="err">backup</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h5 id="_9">动静分离配置</h5>
<p>大多数用于中小型网站，让网站速度更快</p>
<p>这里添加另一个location是因为配置proxy_pass其他设置就已经失效了，所以要另行添加</p>
<div class="codehilite"><pre><span></span><code><span class="nt">http</span><span class="p">{</span>
<span class="w">    </span><span class="err">upstream</span><span class="w"> </span><span class="err">test_server{</span><span class="w"> </span>
<span class="w">        </span><span class="err">server</span><span class="w"> </span><span class="err">192.168.3.210:80</span><span class="p">;</span><span class="w"> </span>
<span class="w">        </span><span class="err">server</span><span class="w"> </span><span class="err">192.168.3.211:80</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nt">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="err">listen</span><span class="w">       </span><span class="err">80</span><span class="p">;</span>
<span class="w">        </span><span class="err">server_name</span><span class="w">  </span><span class="err">localhost</span><span class="p">;</span>

<span class="w">        </span><span class="err">location</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">{</span><span class="w"> </span>
<span class="w">                </span><span class="err">proxy_pass</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">test_server</span><span class="p">;</span><span class="w"> </span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nt">location</span><span class="w"> </span><span class="o">/</span><span class="nt">css</span><span class="w"> </span><span class="p">{</span><span class="w">    </span>
<span class="w">        </span><span class="err">#表示引用./html/css/html/index.html和index.htm</span>
<span class="w">          </span><span class="err">root</span><span class="w"> </span><span class="err">html</span><span class="p">;</span>
<span class="w">          </span><span class="err">index</span><span class="w"> </span><span class="err">index.html</span><span class="w"> </span><span class="err">index.htm</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="err">}</span>
<span class="err">}</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2016 - 2020 Martin Donath
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
    
    
    
      
      
    
    <a href="https://fosstodon.org/@squidfunk" target="_blank" rel="noopener me" title="fosstodon.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.5 102.5 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5m-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<2915597808@qq.com>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "navigation.expand", "navigation.path", "navigation.indexes", "navigation.tabs", "navigation.tabs.sticky", "navigation.top"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../javascripts/extra.js"></script>
      
        <script src="../../javascripts/custom.js"></script>
      
    
  </body>
</html>